{"ast":null,"code":"import _objectSpread from \"H:\\\\js_projects\\\\1\\\\my-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport { API } from \"../API/requests\";\nimport { stopSubmit } from \"redux-form\";\nconst follow = 'Users/FOLLOW';\nconst unfollow = 'Users/UNFOLLOW';\nconst setusers = 'Users/SET_USERS';\nconst Set_Current_Page = 'Users/SET_CURRENT_PAGE';\nconst Set_Total_Count_Of_Users = 'Users/Set_Total_Count_Of_Users';\nconst IsFetching_Toggle = 'Users/Toggle_is_fetching';\nconst IsInProcess_Togle = 'Users/IsInProcess_Togle';\nconst Portion_Size_Changer = 'Users/Portion_Size_Changer';\nconst Set_Founded_Users = 'Users/Set_Founded_Users';\nconst FindUserIsFetching_Toggle = 'Users/FindUserIsFetching_Toggle';\nconst Change_Page_Size = 'Users/ChangePageSize';\nlet DefaultState = {\n  Users: [],\n  pageSize: 20,\n  totalUsersCount: 0,\n  currentPage: 1,\n  IsFetching: false,\n  FindUserIsFetching: false,\n  InProcess: [],\n  PortionSize: 1,\n  FoundedUsers: null\n};\n\nconst UsersReducer = (state = DefaultState, action) => {\n  switch (action.type) {\n    case follow:\n      {\n        return _objectSpread({}, state, {\n          Users: state.Users ? state.Users.map(us => {\n            if (us.id === action.userID) {\n              return _objectSpread({}, us, {\n                followed: true\n              });\n            }\n\n            return us;\n          }) : null\n        });\n      }\n\n    case unfollow:\n      {\n        return _objectSpread({}, state, {\n          Users: state.Users ? state.Users.map(us => {\n            if (us.id === action.userID) {\n              return _objectSpread({}, us, {\n                followed: false\n              });\n            }\n\n            return us;\n          }) : null\n        });\n      }\n\n    case setusers:\n      {\n        return _objectSpread({}, state, {\n          Users: action.users\n        });\n      }\n\n    case Set_Current_Page:\n      {\n        return _objectSpread({}, state, {\n          currentPage: action.currentPage\n        });\n      }\n\n    case Set_Total_Count_Of_Users:\n      {\n        return _objectSpread({}, state, {\n          totalUsersCount: action.totalUsersCount\n        });\n      }\n\n    case IsFetching_Toggle:\n      {\n        return _objectSpread({}, state, {\n          IsFetching: action.IsFetching\n        });\n      }\n\n    case IsInProcess_Togle:\n      {\n        return _objectSpread({}, state, {\n          InProcess: action.InProgress ? [...state.InProcess, action.UserID] : state.InProcess.filter(id => id !== action.UserID)\n        });\n      }\n\n    case Portion_Size_Changer:\n      {\n        return _objectSpread({}, state, {\n          PortionSize: action.PortionSizeChangingValue\n        });\n      }\n\n    case Set_Founded_Users:\n      {\n        return _objectSpread({}, state, {\n          FoundedUsers: action.NewFoundedUsers\n        });\n      }\n\n    case FindUserIsFetching_Toggle:\n      {\n        return _objectSpread({}, state, {\n          FindUserIsFetching: action.FindUserIsFetching\n        });\n      }\n\n    case Change_Page_Size:\n      {\n        return _objectSpread({}, state, {\n          pageSize: action.PageSize\n        });\n      }\n\n    default:\n      return state;\n  }\n};\n\nexport const ChangePageSize = PageSize => {\n  return {\n    type: Change_Page_Size,\n    PageSize\n  };\n};\nexport const OnFollow = userID => {\n  return {\n    type: follow,\n    userID: userID\n  };\n};\nexport const onUnFollow = userID => {\n  return {\n    type: unfollow,\n    userID: userID\n  };\n};\nexport const setUsers = users => {\n  return {\n    type: setusers,\n    users\n  };\n};\nexport const SetCurrentPage = currentPage => {\n  return {\n    type: Set_Current_Page,\n    currentPage: currentPage\n  };\n};\nexport const SetTotalCountOfUsers = totalCount => {\n  return {\n    type: Set_Total_Count_Of_Users,\n    totalUsersCount: totalCount\n  };\n};\nexport const ToggleIsFetching = IsFetching => {\n  return {\n    type: IsFetching_Toggle,\n    IsFetching\n  };\n};\nexport const ToggleFindUserIsFetching = FindUserIsFetching => {\n  return {\n    type: FindUserIsFetching_Toggle,\n    FindUserIsFetching\n  };\n};\nexport const ToggleInProcess = (InProgress, UserID) => {\n  return {\n    type: IsInProcess_Togle,\n    InProgress,\n    UserID\n  };\n};\nexport const ChangePortionSize = value => {\n  return {\n    type: Portion_Size_Changer,\n    PortionSizeChangingValue: value\n  };\n};\nexport const SetFoundedUsers = NewFoundedUsers => {\n  return {\n    type: Set_Founded_Users,\n    NewFoundedUsers\n  };\n};\nexport const getUsersThunk = (currentPage, pageSize) => async dispatch => {\n  dispatch(ToggleIsFetching(true));\n  const Users = await API.getUsers(currentPage, pageSize);\n  dispatch(ToggleIsFetching(false));\n  dispatch(setUsers(Users.items));\n  dispatch(SetTotalCountOfUsers(Users.totalCount));\n};\nexport const unfollowThunk = userID => async dispatch => {\n  dispatch(ToggleInProcess(true, userID));\n  const DelSubResult = await API.DelSub(userID);\n\n  if (DelSubResult.resultCode === 0) {\n    dispatch(onUnFollow(userID));\n  }\n\n  dispatch(ToggleInProcess(false, userID));\n};\nexport const followThunk = userID => async dispatch => {\n  dispatch(ToggleInProcess(true, userID));\n  const AddSubResult = await API.AddSub(userID);\n\n  if (AddSubResult.resultCode === 0) {\n    dispatch(OnFollow(userID));\n  }\n\n  dispatch(ToggleInProcess(false, userID));\n};\nexport const FindUserThunk = UserName => async dispatch => {\n  dispatch(ToggleFindUserIsFetching(true));\n  const FoundedUsers = await API.FindUser(UserName);\n  dispatch(ToggleFindUserIsFetching(false));\n\n  if (!FoundedUsers.error) {\n    dispatch(SetFoundedUsers(FoundedUsers.items));\n  } else {\n    //@ts-ignore\n    dispatch(stopSubmit(\"FindUser\", {\n      _error: FoundedUsers.error.messages[0]\n    }));\n  }\n};\nexport default UsersReducer;","map":{"version":3,"sources":["H:\\js_projects\\1\\my-app\\src\\data\\UsersReduser.ts"],"names":["API","stopSubmit","follow","unfollow","setusers","Set_Current_Page","Set_Total_Count_Of_Users","IsFetching_Toggle","IsInProcess_Togle","Portion_Size_Changer","Set_Founded_Users","FindUserIsFetching_Toggle","Change_Page_Size","DefaultState","Users","pageSize","totalUsersCount","currentPage","IsFetching","FindUserIsFetching","InProcess","PortionSize","FoundedUsers","UsersReducer","state","action","type","map","us","id","userID","followed","users","InProgress","UserID","filter","PortionSizeChangingValue","NewFoundedUsers","PageSize","ChangePageSize","OnFollow","onUnFollow","setUsers","SetCurrentPage","SetTotalCountOfUsers","totalCount","ToggleIsFetching","ToggleFindUserIsFetching","ToggleInProcess","ChangePortionSize","value","SetFoundedUsers","getUsersThunk","dispatch","getUsers","items","unfollowThunk","DelSubResult","DelSub","resultCode","followThunk","AddSubResult","AddSub","FindUserThunk","UserName","FindUser","error","_error","messages"],"mappings":"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","sourcesContent":["import {API} from \"../API/requests\";\r\nimport {stopSubmit} from \"redux-form\";\r\nimport {TUsers, UserID} from \"../components/GlobalTypes/UsersTypes/UsersTypes\";\r\nimport {ThunkAction} from \"redux-thunk\";\r\nimport {GlobalState} from \"./redux-store\";\r\n\r\n\r\nconst follow = 'Users/FOLLOW'\r\nconst unfollow = 'Users/UNFOLLOW'\r\nconst setusers = 'Users/SET_USERS'\r\nconst Set_Current_Page = 'Users/SET_CURRENT_PAGE'\r\nconst Set_Total_Count_Of_Users = 'Users/Set_Total_Count_Of_Users'\r\nconst IsFetching_Toggle = 'Users/Toggle_is_fetching'\r\nconst IsInProcess_Togle = 'Users/IsInProcess_Togle'\r\nconst Portion_Size_Changer = 'Users/Portion_Size_Changer'\r\nconst Set_Founded_Users = 'Users/Set_Founded_Users'\r\nconst FindUserIsFetching_Toggle = 'Users/FindUserIsFetching_Toggle'\r\nconst Change_Page_Size = 'Users/ChangePageSize'\r\n\r\n\r\ntype OnFollowActionType = {\r\n    type: typeof follow\r\n    userID: UserID\r\n}\r\n\r\ntype onUnFollowActionType = {\r\n    type: typeof unfollow\r\n    userID: UserID\r\n}\r\n\r\ntype setUsersActionType = {\r\n    type: typeof setusers\r\n    users: Array<TUsers>\r\n}\r\n\r\ntype SetCurrentPageActionType = {\r\n    type: typeof Set_Current_Page\r\n    currentPage: number\r\n}\r\ntype SetTotalCountOfUsersActionType = {\r\n    type: typeof Set_Total_Count_Of_Users\r\n    totalUsersCount: number\r\n}\r\ntype ToggleIsFetchingActionType = {\r\n    type: typeof IsFetching_Toggle\r\n    IsFetching: boolean\r\n}\r\ntype ToggleFindUserIsFetchingActionType = {\r\n    type: typeof FindUserIsFetching_Toggle\r\n    FindUserIsFetching: boolean\r\n}\r\ntype ChangePortionSizeActionType = {\r\n    type: typeof Portion_Size_Changer\r\n    PortionSizeChangingValue: number\r\n}\r\n\r\ntype ToggleInProcessActionType = {\r\n    type: typeof IsInProcess_Togle\r\n    InProgress: boolean\r\n    UserID: UserID\r\n}\r\ntype SetFoundedUserActionType = {\r\n    type: typeof Set_Founded_Users\r\n    NewFoundedUsers:  Array<TUsers>\r\n}\r\n\r\ntype ChangePageSizeActionType = {\r\n    type: typeof Change_Page_Size\r\n    PageSize: number\r\n}\r\n\r\nlet DefaultState = {\r\n    Users: [] as Array<TUsers> | null,\r\n    pageSize: 20,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    IsFetching: false,\r\n    FindUserIsFetching: false,\r\n    InProcess: [] as Array<number>,\r\n    PortionSize: 1,\r\n    FoundedUsers: null as Array<TUsers>| null\r\n}\r\n\r\n\r\nexport type DefaultUsersState = typeof DefaultState\r\n\r\ntype TUsersActions = OnFollowActionType | onUnFollowActionType | setUsersActionType | SetCurrentPageActionType\r\n    | SetTotalCountOfUsersActionType | ToggleIsFetchingActionType | ToggleFindUserIsFetchingActionType\r\n    | ChangePortionSizeActionType | ToggleInProcessActionType | SetFoundedUserActionType | ChangePageSizeActionType\r\n\r\n type TUsersThunks = ThunkAction<Promise<void>, GlobalState, unknown, TUsersActions>\r\n\r\nconst UsersReducer = (state = DefaultState, action: TUsersActions): DefaultUsersState => {\r\n    switch (action.type) {\r\n        case follow: {\r\n            return {\r\n                ...state,\r\n                Users: state.Users ? state.Users.map(us => {\r\n                        if (us.id === action.userID) {\r\n                            return {\r\n                                ...us,\r\n                                followed: true\r\n                            }\r\n                        }\r\n                        return us\r\n                    })\r\n                    : null\r\n            }\r\n        }\r\n        case unfollow: {\r\n            return {\r\n                ...state,\r\n                Users: state.Users ? state.Users.map(us => {\r\n                        if (us.id === action.userID) {\r\n                            return {\r\n                                ...us,\r\n                                followed: false\r\n                            }\r\n                        }\r\n                        return us\r\n                    })\r\n                    : null\r\n            }\r\n        }\r\n        case setusers: {\r\n            return {...state, Users: action.users}\r\n        }\r\n        case Set_Current_Page: {\r\n            return {...state, currentPage: action.currentPage}\r\n        }\r\n        case Set_Total_Count_Of_Users: {\r\n            return {...state, totalUsersCount: action.totalUsersCount}\r\n        }\r\n        case IsFetching_Toggle: {\r\n            return {...state, IsFetching: action.IsFetching}\r\n        }\r\n        case IsInProcess_Togle: {\r\n            return {\r\n                ...state,\r\n                InProcess: action.InProgress ?\r\n                    [...state.InProcess, action.UserID]\r\n                    : state.InProcess.filter(id => id !== action.UserID)\r\n            }\r\n        }\r\n\r\n        case Portion_Size_Changer: {\r\n            return {...state, PortionSize: action.PortionSizeChangingValue}\r\n        }\r\n        case Set_Founded_Users: {\r\n            return {...state, FoundedUsers: action.NewFoundedUsers}\r\n        }\r\n        case FindUserIsFetching_Toggle: {\r\n            return {...state, FindUserIsFetching: action.FindUserIsFetching}\r\n        }\r\n        case Change_Page_Size: {\r\n            return {...state, pageSize: action.PageSize}\r\n        }\r\n        default :\r\n            return state\r\n    }\r\n}\r\n\r\nexport const ChangePageSize = (PageSize: number): ChangePageSizeActionType => {\r\n\r\n    return {type: Change_Page_Size, PageSize}\r\n}\r\n\r\nexport const OnFollow = (userID: UserID): OnFollowActionType => {\r\n    return {type: follow, userID: userID}\r\n}\r\n\r\nexport const onUnFollow = (userID: UserID): onUnFollowActionType => {\r\n    return {type: unfollow, userID: userID}\r\n}\r\n\r\nexport const setUsers = (users: Array<TUsers>): setUsersActionType => {\r\n    return {type: setusers,  users}\r\n}\r\n\r\nexport const SetCurrentPage = (currentPage: number): SetCurrentPageActionType => {\r\n    return {type: Set_Current_Page, currentPage: currentPage}\r\n}\r\n\r\nexport const SetTotalCountOfUsers = (totalCount: number): SetTotalCountOfUsersActionType => {\r\n    return {type: Set_Total_Count_Of_Users, totalUsersCount: totalCount}\r\n}\r\n\r\nexport const ToggleIsFetching = (IsFetching: boolean): ToggleIsFetchingActionType => {\r\n    return {type: IsFetching_Toggle, IsFetching}\r\n}\r\n\r\nexport const ToggleFindUserIsFetching = (FindUserIsFetching: boolean): ToggleFindUserIsFetchingActionType => {\r\n    return {type: FindUserIsFetching_Toggle, FindUserIsFetching}\r\n}\r\n\r\nexport const ToggleInProcess = (InProgress: boolean, UserID: UserID): ToggleInProcessActionType => {\r\n    return {type: IsInProcess_Togle, InProgress, UserID}\r\n\r\n}\r\n\r\nexport const ChangePortionSize = (value: number): ChangePortionSizeActionType => {\r\n    return {type: Portion_Size_Changer, PortionSizeChangingValue: value}\r\n}\r\nexport const SetFoundedUsers = (NewFoundedUsers:  Array<TUsers>): SetFoundedUserActionType => {\r\n    return {type: Set_Founded_Users, NewFoundedUsers}\r\n}\r\n\r\n\r\nexport const getUsersThunk = (currentPage: number, pageSize: number): TUsersThunks => async (dispatch) => {\r\n    dispatch(ToggleIsFetching(true))\r\n    const Users = await API.getUsers(currentPage, pageSize)\r\n    dispatch(ToggleIsFetching(false))\r\n    dispatch(setUsers(Users.items))\r\n    dispatch(SetTotalCountOfUsers(Users.totalCount))\r\n}\r\n\r\n\r\nexport const unfollowThunk = (userID: UserID): TUsersThunks => async (dispatch) => {\r\n    dispatch(ToggleInProcess(true, userID))\r\n    const DelSubResult = await API.DelSub(userID)\r\n    if (DelSubResult.resultCode === 0) {\r\n        dispatch(onUnFollow(userID))\r\n    }\r\n    dispatch(ToggleInProcess(false, userID))\r\n}\r\n\r\nexport const followThunk = (userID: UserID): TUsersThunks => async (dispatch) => {\r\n    dispatch(ToggleInProcess(true, userID))\r\n    const AddSubResult = await API.AddSub(userID)\r\n    if (AddSubResult.resultCode === 0) {\r\n        dispatch(OnFollow(userID))\r\n    }\r\n    dispatch(ToggleInProcess(false, userID))\r\n}\r\n\r\nexport const FindUserThunk = (UserName: string): TUsersThunks => async (dispatch) => {\r\n    dispatch(ToggleFindUserIsFetching(true))\r\n    const FoundedUsers = await API.FindUser(UserName)\r\n    dispatch(ToggleFindUserIsFetching(false))\r\n    if (!FoundedUsers.error) {\r\n        dispatch(SetFoundedUsers(FoundedUsers.items))\r\n    } else {\r\n        //@ts-ignore\r\n        dispatch(stopSubmit(\"FindUser\", {_error: FoundedUsers.error.messages[0]}))\r\n    }\r\n}\r\n\r\nexport default UsersReducer"]},"metadata":{},"sourceType":"module"}